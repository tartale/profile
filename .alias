#!/bin/bash

unalias -a

alias ae='vi $HOME/dotfiles/.alias && source $HOME/dotfiles/.alias'
alias aenv='env | grep AWS'
alias allgit='find $PROJECTS -name ".git" -exec dirname {} \;'
alias als='aws s3 ls s3://aspenmesh-release'
alias awho='aws sts get-caller-identity'
alias awsh='echo $(kubectl -n istio-system get svc istio-ingressgateway -o=jsonpath="{.status.loadBalancer.ingress[0].hostname}")'
alias bookinfo-sample.sh='bookinfo-sample.sh $(basename $PWD)'
alias bookinfo-traffic.sh='bookinfo-traffic.sh $(basename $PWD)'
alias ccv='circleci config validate --org-slug gh/aspenmesh'
alias cdc='cd /Users/artale/aspenmesh/clusters'
alias cdcgd='cd /Users/artale/aspenmesh/clusters/green.demo.k8s.local'
alias cdcmd='cd /Users/artale/aspenmesh/clusters/mttr.demo.k8s.local'
alias cdctd='cd /Users/artale/aspenmesh/clusters/tom.dev.k8s.local'
alias cdctt='cd /Users/artale/aspenmesh/clusters/tom.test.k8s.local'
alias cdd='cd /Users/artale/aspenmesh/downloads'
alias cdgo='cd /Users/artale/aspenmesh/go/src'
alias cdgoa='cd /Users/artale/aspenmesh/go/src/github.com/aspenmesh'
alias cdgoap='cd /Users/artale/aspenmesh/go/src/github.com/aspenmesh/apiserver'
alias cdgot='cd /Users/artale/aspenmesh/go/src/github.com/tartale'
alias cluster-info.sh='cluster-info.sh $(basename $PWD)'
alias da='direnv allow'
alias dp='docker system prune'
alias gaa='git add .'
alias gb='git branch'
alias gcb='git branch --show-current'
alias gck='git checkout'
alias gckm='git checkout $(gdefault)'
alias gcm='git commit -vm'
alias gcw='git commit -vm WIP'
alias gd='git diff'
alias gl='git log'
alias gll='git log --graph --decorate --pretty=oneline --abbrev-commit --all'
alias gmt='go mod tidy && git add go.mod go.sum && git commit -vm "go mod tidy" && $(gpush)'
alias gpush='git push origin $(gcb)'
alias gs='git status'
alias gsu='git submodule update --init --recursive'
alias gsul='git submodule update --remote --merge'
alias gum='cb=$(gcb) && git checkout $(gdefault) && git pull upstream $(gdefault) && git checkout $cb'
alias hls='helm ls -A'
alias hmt='history | grep "make test" | grep -v history'
alias ht="helm template istio $(recentDownload)/manifests/charts/istio-control/istio-discovery --namespace istio-system"
alias install-aspen-mesh.sh='$(issafe) && install-aspen-mesh.sh $(basename $PWD)'
alias install-secrets.sh='install-secrets.sh $(basename $PWD)'
alias initialize-openshift-namespace.sh='initialize-openshift-namespace.sh $(basename $PWD)'
# alias issafe='[ "$CLUSTER_NAME" != "" ] && [ "$CLUSTER_NAME" != "mttr.demo.k8s.local" ] && [ "$CLUSTER_NAME" != "tom.dev.k8s.local" ]'
alias issafe='[ "true" == "true" ]'
alias it='RUN_INT_TESTS="true" GINKGO_PKGS="test/int/eventmanager" make test'
alias jpwd='printf $(kubectl get secret --namespace default jenkins -o jsonpath="{.data.jenkins-admin-password}" | base64 --decode);echo'
alias k='kubectl'
alias kam='kubectl get pods -n istio-system | grep alertmanager | awk "{print \$1}"'
alias kcp='kubectl get pods -n istio-system | grep controlplane | awk "{print \$1}"'
alias kcsn='kubectl get pods -n istio-system | grep event-storage | awk "{print \$1}"'
alias kjn='kubectl get pods -n default | grep jenkins | awk "{print \$1}"'
alias kdc='$(issafe) && kops delete cluster'
alias kdp='kubectl describe pods -n istio-system'
alias kec='kops edit cluster'
alias kca='kops-cluster-api-access.sh $(basename $PWD)'
alias kgp='watch kubectl get pods -n istio-system'
alias kicsn='kubectl get pods -n istio-system | grep istio-cassandra | awk "{print \$1}"'
alias kmc='kubectl get pods -n istio-system | grep metrics-collector | awk "{print \$1}"'
alias kmrl='kubectl logs -n istio-system $(kcp | tail -n 1) modelruntime'
alias kpfam='(while true; do kubectl port-forward -n istio-system $(kam | tail -n 1) 9093; done)'
alias kpfcpa='(while true; do kubectl port-forward -n istio-system $(kcp | tail -n 1) 19005; done)'
alias kpfcph='(while true; do kubectl port-forward -n istio-system $(kcp | tail -n 1) 9105; done)'
alias kpfcpu='(while true; do kubectl port-forward -n istio-system $(kcp | tail -n 1) 19001; done)'
alias kpfcsn='(while true; do kubectl port-forward -n istio-system $(kcsn | tail -n 1) 9042; done)'
alias kpfmc='(while true; do kubectl port-forward -n istio-system $(kmc | tail -n 1) 9090; done)'
alias kpfmr='(while true; do kubectl port-forward -n istio-system $(kcp | tail -n 1) 50051; done)'
alias kpfjn='(while true; do kubectl port-forward -n default $(kjn | tail -n 1) 8080; done)'
alias ktg='kubectl get pods -n istio-system | grep traffic-generator-productpage | awk "{print \$1}"'
alias kpficsn='(while true; do kubectl port-forward -n istio-system $(kicsn | tail -n 1) 9042; done)'
alias kpficsna='(while true; do kubectl port-forward -n istio-system $(kicsn | tail -n 1) 7199; done)'
alias ktncp='(while true; do k delete ns ktunnel ; k create ns ktunnel; ktunnel -v expose controlplane-local -n ktunnel 18001:18001; k delete ns ktunnel; done)'
alias kuc='kops update cluster --yes'
alias kvc='watch kops validate cluster'
alias ldl="ls -lrt ${PROJECTS}/downloads"
alias ll='ls -la'
alias mvn='mvn -U'
alias nw='watch -n 1 lsof -nP -i'
alias oh='kubectl apply -f https://git.io/JJ6dY'
alias pidport='lsof -i -n -P'
alias psa='ps -ao user,pid,ppid,start,time,command'
alias psu='ps auwx | grep tom.artale'
alias remove-aspen-mesh.sh='$(issafe) && remove-aspen-mesh.sh $(basename $PWD)'
alias scp='scp -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
alias sg='npm run build-types /Users/artale/aspenmesh/go/src/github.com/aspenmesh/apiserver/pkg/generated/api/public/controlplane/v1/service.swagger.json controlplane'
alias ssh='ssh -t -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
alias speaknspell='while true; do IFS= read -r f; say $f; done'
alias letterspell='while true; do IFS= read -r -n1 f; say $f; done'
alias up1='cd ..'
alias up2='cd ../../'
alias up3='cd ../../../'
alias up4='cd ../../../../'
alias up5='cd ../../../../../'
alias upgrade-aspen-mesh.sh='upgrade-aspen-mesh.sh $(basename $PWD)'
alias ut='RUN_INT_TESTS="false" GINKGO_PKGS="pkg/eventmanager" make test'
